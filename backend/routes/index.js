var path=require("path"),log="",fs=require("fs"),util=require("util"),router=require("express").Router();function req(e,r,t){var i=require(t);r=r.replace(/@/g,":"),log+=util.format("Mapping %s %s to %s \n",e.toUpperCase(),r.substring(__dirname.length,r.length),t),router[e](r.substring(__dirname.length,r.length),i)}function treeWalker(e,t){e.sort(function(e,r){return e.match(/:.+|@.+/)?1:e.match(/:.+|@.+/)?-1:0}),e.forEach(function(e){if(fs.statSync(t+"/"+e).isFile()){if(!(path.extname(t+"/"+e)in require.extensions))return;var r=path.basename(t+"/"+e,".js");if("index"!=r)try{req(r,t+"/",t+"/"+e)}catch(e){console.log("[dir-routes] "+e.stack),process.exit()}}else treeWalker(fs.readdirSync(t+"/"+e),t+"/"+e)})}treeWalker(fs.readdirSync(__dirname),__dirname),module.exports=router,module.exports.log=log;